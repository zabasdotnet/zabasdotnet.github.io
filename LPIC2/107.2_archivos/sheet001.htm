<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:x="urn:schemas-microsoft-com:office:excel"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=UF-8">
<meta name=ProgId content=Excel.Sheet>
<meta name=Generator content="Microsoft Excel 15">
<link id=Main-File rel=Main-File href="../107.2.htm">
<link rel=File-List href=filelist.xml>
<link rel=Stylesheet href=stylesheet.css>
<style>
<!--table
	{mso-displayed-decimal-separator:"\,";
	mso-displayed-thousand-separator:"\.";}
@page
	{margin:.75in .7in .75in .7in;
	mso-header-margin:.3in;
	mso-footer-margin:.3in;}
-->
</style>
<![if !supportTabStrip]><script language="JavaScript">
<!--
function fnUpdateTabs()
 {
  if (parent.window.g_iIEVer>=4) {
   if (parent.document.readyState=="complete"
    && parent.frames['frTabs'].document.readyState=="complete")
   parent.fnSetActiveSheet(0);
  else
   window.setTimeout("fnUpdateTabs();",150);
 }
}

if (window.name!="frSheet")
 window.location.replace("../107.2.htm");
else
 fnUpdateTabs();
//-->
</script>
<![endif]>
</head>

<body link=blue vlink=purple class=xl67>

<table border=0 cellpadding=0 cellspacing=0 width=2879 style='border-collapse:
 collapse;table-layout:fixed;width:2159pt'>
 <col class=xl67 width=48 style='mso-width-source:userset;mso-width-alt:1755;
 width:36pt'>
 <col class=xl65 width=284 style='mso-width-source:userset;mso-width-alt:10386;
 width:213pt'>
 <col class=xl67 width=944 style='mso-width-source:userset;mso-width-alt:34523;
 width:708pt'>
 <col class=xl67 width=583 style='mso-width-source:userset;mso-width-alt:21321;
 width:437pt'>
 <col class=xl67 width=751 style='mso-width-source:userset;mso-width-alt:27465;
 width:563pt'>
 <col class=xl67 width=269 style='mso-width-source:userset;mso-width-alt:9837;
 width:202pt'>
 <col class=xl67 width=456 style='mso-width-source:userset;mso-width-alt:16676;
 width:342pt'>
 <tr class=xl65 height=21 style='mso-height-source:userset;height:15.75pt'>
  <td height=21 class=xl65 width=48 style='height:15.75pt;width:36pt'>107.2</td>
  <td class=xl65 width=284 style='width:213pt'>W4</td>
  <td class=xl65 width=944 style='width:708pt'>Automate system administration
  tasks by scheduling jobs</td>
  <td class=xl66 width=583 style='width:437pt'><a href="../107.htm"
  target="_parent"><span style='font-weight:700'>Volver</span></a></td>
  <td class=xl65 width=751 style='width:563pt'></td>
  <td class=xl65 width=269 style='width:202pt'></td>
 </tr>
 <tr height=200 style='height:150.0pt'>
  <td height=200 class=xl65 width=48 style='height:150.0pt;width:36pt'></td>
  <td class=xl65 width=284 style='width:213pt'>/etc/cron.
  {d,daily,hourly,monthly,weekly}/</td>
  <td class=xl67 width=944 style='width:708pt'>$ ls cron.daily/<br>
    00-logwatch<span style='mso-spacerun:yes'>  </span>0anacron<span
  style='mso-spacerun:yes'>   </span>makewhatis.cron<span
  style='mso-spacerun:yes'>  </span>slocate.cron<br>
    00webalizer<span style='mso-spacerun:yes'>  </span>logrotate<span
  style='mso-spacerun:yes'>  </span>rpm<span
  style='mso-spacerun:yes'>              </span>tmpwatch<br>
    Entre los programas ejecutados, fíjese logrotate, que permite efectuar
  copias de seguridad y renombrar ficheros logs y ficheros de diario del
  sistema con el fin de que éstos no se vuelvan inabarcables a consecuencia de
  su tamaño. <br>
    El programa tmpwatch se encarga de limpiar el sistema de los ficheros
  «ociosos» (en /tmp por ejemplo).<br>
    <br>
    El directorio /etc/cron.d contiene crontabs adicionales siempre en formato
  crontab sistema. <br>
    Por lo tanto, una aplicación que debe ejecutar tareas recurrentes deberá
  crearse su propio archivo en vez de modificar una tabla existente.<br>
    </td>
  <td class=xl67 width=583 style='width:437pt'></td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=60 style='height:45.0pt'>
  <td height=60 class=xl65 width=48 style='height:45.0pt;width:36pt'></td>
  <td class=xl65 width=284 style='width:213pt'>/etc/at.deny</td>
  <td class=xl67 width=944 style='width:708pt'>Si at.allow no está creado, at
  comprueba la presencia de un fichero at.deny. <br>
    Todos los usuarios que no están en él están autorizados a utilizar
  at.<br>
    Si está vacío, todo el mundo está autorizado a utilizar el comando at.</td>
  <td class=xl65 width=583 style='width:437pt'>Si no existe ninguno de los dos
  ficheros, sólo root puede utilizar at.</td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=20 style='height:15.0pt'>
  <td height=20 class=xl65 width=48 style='height:15.0pt;width:36pt'></td>
  <td class=xl65 width=284 style='width:213pt'>/etc/at.allow</td>
  <td class=xl67 width=944 style='width:708pt'>Si at.allow está creado, sólo
  los usuarios explícitamente indicados pueden utilizar at.</td>
  <td class=xl65 width=583 style='width:437pt'>Si no existe ninguno de los dos
  ficheros, sólo root puede utilizar at.</td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=240 style='height:180.0pt'>
  <td height=240 class=xl65 width=48 style='height:180.0pt;width:36pt'></td>
  <td class=xl65 width=284 style='width:213pt'>/etc/crontab</td>
  <td class=xl67 width=944 style='width:708pt'>La configuración crontab general
  para el sistema se encuentra en /etc/crontab.<br>
    Su sintaxis difiere un poco.<br>
    Hay un campo adicional.<br>
    Permite especificar el usuario con el que se ejecutará el comando.<br>
    <br>
    # run-parts<br>
    01 * * * * root run-parts /etc/cron.hourly<br>
    02 4 * * * root run-parts /etc/cron.daily<br>
    22 4 * * 0 root run-parts /etc/cron.weekly<br>
    42 4 1 * * root run-parts /etc/cron.monthly<br>
    Aquí todos los días a las 4:02 h de la mañana se ejecuta run-parts
  /etc/cron.daily. El script run-parts acepta como parámetro un directorio y
  ejecuta todos los programas presentes en éste.</td>
  <td class=xl67 width=583 style='width:437pt'></td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=20 style='height:15.0pt'>
  <td height=20 class=xl65 width=48 style='height:15.0pt;width:36pt'></td>
  <td class=xl65 width=284 style='width:213pt'>/etc/cron.allow</td>
  <td class=xl67 width=944 style='width:708pt'>Si cron.allow está creado, sólo
  los usuarios explícitamente indicados pueden utilizar cron</td>
  <td class=xl65 width=583 style='width:437pt'>Si no existe ninguno de los dos
  ficheros, sólo root puede utilizar cron.</td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=60 style='height:45.0pt'>
  <td height=60 class=xl65 width=48 style='height:45.0pt;width:36pt'></td>
  <td class=xl65 width=284 style='width:213pt'>/etc/cron.deny</td>
  <td class=xl67 width=944 style='width:708pt'>Si cron.allow no está creado,
  cron comprueba la presencia de un fichero cron.deny.<br>
    Todos los usuarios que no estén en él están autorizados a utilizar
  cron.<br>
    Si está vacío, todo el mundo está autorizado a utilizar cron.</td>
  <td class=xl65 width=583 style='width:437pt'>Si no existe ninguno de los dos
  ficheros, sólo root puede utilizar cron.</td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=20 style='height:15.0pt'>
  <td height=20 class=xl65 width=48 style='height:15.0pt;width:36pt'></td>
  <td class=xl65 width=284 style='width:213pt'>/var/spool/cron/</td>
  <td class=xl67 width=944 style='width:708pt'>Ruta donde se guardan los
  ficheros crontab</td>
  <td class=xl67 width=583 style='width:437pt'></td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=460 style='height:345.0pt'>
  <td height=460 class=xl65 width=48 style='height:345.0pt;width:36pt'></td>
  <td class=xl65 width=284 style='width:213pt'>crontab</td>
  <td class=xl67 width=944 style='width:708pt'>El servicio cron permite la
  programación de eventos repetidos.<br>
    <br>
    Funciona con la ayuda de una tabla, llamada una crontab.<br>
    <br>
    Es un fichero de texto que se puede editar con un simple editor, como por
  ejemplo vi.<br>
    <br>
    Para modificar su crontab personal, utilice el comando crontab con objeto
  de editar la tabla con el parámetro -e.<br>
    <br>
    Se guardan los ficheros contrabs en /var/spool/cron.<br>
    <br>
    El servicio cron debe estar en ejecución para que las crontabs estén
  activas.<br>
    <br>
    <br>
    El formato de un registro de crontab es el siguiente:<br>
    Minutos | Horas | Día del mes | Mes | Día semana | Comando<br>
    1|2|3|4|5|6<br>
    <br>
    Utilice el formato siguiente para los valores periódicos:<br>
    Un valor para indicar cuándo se debe ejecutar el comando. P. ej.: el valor
  15 en el campo minuto significa el decimoquinto minuto.<br>
    Una lista de valores separados por comas. P. ej.: 1,4,7,10 en el campo mes
  para enero, abril, julio, octubre.<br>
    Un intervalo de valores. P. ej.: 1-5 en el campo día de la semana indica de
  lunes (1) a viernes (5). El 0 es el domingo y el 6, el sábado.<br>
    <br>
    El carácter * para todos los valores posibles. P. ej.: * en el campo día
  del mes indica todos los días del mes o de los meses.</td>
  <td class=xl67 width=583 style='width:437pt'>Ejemplos<br>
    Ejecución de df todos los días, todo el año, cada cuarto de hora:<br>
    0,15,30,45 * * * * df &gt; /tmp/libre<br>
    <br>
    Ejecución de un comando todos los días laborables a las 17 horas:<br>
    0 17 * * 1-5 fin_trabajo.sh<br>
    <br>
    Listar las crontabs activas:<br>
    $ crontab -l<br>
    <br>
    Suprimir la crontab activa:<br>
    $ crontab -r<br>
    <br>
    Editar la crontab de un usuario particular:<br>
    # crontab -u user</td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl65 width=269 style='width:202pt'></td>
 </tr>
 <tr height=500 style='height:375.0pt'>
  <td height=500 class=xl65 width=48 style='height:375.0pt;width:36pt'></td>
  <td class=xl65 width=284 style='width:213pt'>at</td>
  <td class=xl67 width=944 style='width:708pt'>El comando at y los comandos
  asociados permiten la gestión de los batchs.<br>
    <br>
    A diferencia de la contrab, los modificaciones son volátiles: se pierden
  cuando se termina la sesión.<br>
    <br>
    Le corresponde a usted colocar la lista de los comandos en un posible
  fichero y cargarlo si es necesario mediante los scripts de su perfil.<br>
    <br>
    Para que funcione at, el servicio atd (at daemon) debe estar en
  marcha.<br>
    $ ps -ef | grep atd<br>
    at<span style='mso-spacerun:yes'>        </span>7988<span
  style='mso-spacerun:yes'>     </span>1<span style='mso-spacerun:yes'> 
  </span>0 21:05 ?<span style='mso-spacerun:yes'>        </span>00:00:00
  /usr/sbin/atd<br>
    <br>
    Para simplificar, hay dos maneras de utilizar at:<br>
    <br>
    - pasándole una línea de comandos de manera interactiva,<br>
    - pasándole un fichero ejecutable que contiene los comandos que se deben
  ejecutar.<br>
    <br>
    En los dos casos, debe facilitar a at una hora de ejecución. <br>
    El formato de esta hora es bastante flexible.<span
  style='mso-spacerun:yes'> </span></td>
  <td class=xl67 width=583 style='width:437pt'>Para programar la ejecución de
  una línea de comandos a las 21:20 h de manera interactiva:<br>
    $ at 21:20<br>
    warning: commands will be executed using /bin/sh<br>
    at&gt; echo hola<br>
    at&gt; &lt;EOT&gt;<br>
    job 4 at 2008-05-08 21:20<br>
    Después de haber entrado el comando o los comandos que se deben ejecutar a
  las 21:20 h, pulse [Intro], y en una línea vacía pulse [Ctrl] D (final de
  entrada). <br>
    El comando at confirma la programación del comando.<br>
    <br>
    Para programar la ejecución de un comando (script o binario) a las 21:25
  h:<br>
    $ at -f /home/seb/test.sh 21:25<br>
    warning: commands will be executed using /bin/sh<br>
    job 6 at 2008-05-08 21:25<br>
    </td>
  <td class=xl67 width=751 style='width:563pt'>Hora<br>
    Se puede formatear la hora de la manera siguiente:<br>
    HHMM o HH:MM.<br>
    La hora puede tener el formato de 12 o 24 h. Con el formato de 12 horas,
  puede especificar AM (mañana) o PM (tarde).<br>
    Midnight (medianoche), noon (mediodía), teatime (16:00 h, típicamente
  inglés).<br>
    MMJJAA, MM/JJ/AA o JJ.MM.AA para una fecha particular.<br>
    Now: ahora.<br>
    + n minutes/hours/days/weeks: la hora actual a la que se añaden n
  minutos/horas/días/semanas.<br>
    <br>
    Si la hora especificada es inferior a la hora actual, se ejecuta el comando
  al día siguiente.<br>
    <br>
    $ at 21:30 09.05.2008<br>
    warning: commands will be executed using /bin/sh<br>
    at&gt; echo ¡hola!<br>
    at&gt; &lt;EOT&gt;<br>
    job 9 at 2008-05-09 21:30<br>
    $ at now + 2 days<br>
    warning: commands will be executed using /bin/sh<br>
    at&gt; echo en dos días<br>
    at&gt; &lt;EOT&gt;<br>
    job 10 at 2008-05-10 21:29<br>
    <br>
    También existe el comando batch, que no tiene en cuenta la hora. <br>
    Ejecuta el comando en cuanto el nivel de trabajo de la máquina lo
  permite.<br>
    Se puede especificar la hora, pero en este caso se considera como «a partir
  de esta hora en cuanto sea posible».</td>
  <td class=xl65 width=269 style='width:202pt'></td>
 </tr>
 <tr height=20 style='height:15.0pt'>
  <td height=20 class=xl65 width=48 style='height:15.0pt;width:36pt'></td>
  <td class=xl65 width=284 style='width:213pt'></td>
  <td class=xl67 width=944 style='width:708pt'></td>
  <td class=xl67 width=583 style='width:437pt'></td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl65 width=269 style='width:202pt'></td>
 </tr>
 <tr height=240 style='height:180.0pt'>
  <td height=240 class=xl65 width=48 style='height:180.0pt;width:36pt'></td>
  <td class=xl65 width=284 style='width:213pt'>atq</td>
  <td class=xl67 width=944 style='width:708pt'>El comando atq (at queue)
  permite listar las tareas programadas:<br>
    $ atq<br>
    10<span style='mso-spacerun:yes'>      </span>2008-05-10 21:29 a seb<br>
    9<span style='mso-spacerun:yes'>       </span>2008-05-09 21:30 a seb<br>
    <br>
    Se colocan los jobs (tareas) en el directorio /var/spool/atjobs, a razón de
  un ejecutable por tarea.<br>
    # ls -l /var/spool/atjobs/<br>
    -rwx------ 1 seb users 5620 may<span style='mso-spacerun:yes'>  </span>8
  21:29 a000090133cf92<br>
    -rwx------ 1 seb users 5628 may<span style='mso-spacerun:yes'>  </span>8
  21:30 a0000a0133d531<br>
    <br>
    Si mira el contenido del ejecutable, verá que su comando no está
  solo.<br>
    Está situado al final, pero el script ubica todo el entorno durante la
  creación de la entrada at.</td>
  <td class=xl67 width=583 style='width:437pt'></td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl65 width=269 style='width:202pt'></td>
 </tr>
 <tr height=80 style='height:60.0pt'>
  <td height=80 class=xl67 width=48 style='height:60.0pt;width:36pt'></td>
  <td class=xl68 width=284 style='width:213pt'>atrm</td>
  <td class=xl67 width=944 style='width:708pt'>El comando atrm permite suprimir
  una tarea:<br>
    $ atrm 10<br>
    $ atrm 9<br>
    $ atq</td>
  <td class=xl67 width=583 style='width:437pt'></td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=160 style='height:120.0pt'>
  <td height=160 class=xl67 width=48 style='height:120.0pt;width:36pt'></td>
  <td class=xl68 width=284 style='width:213pt'>anacron</td>
  <td class=xl67 width=944 style='width:708pt'>anacron es una aplicación que
  ejecuta tareas programadas al igual que cron pero asumiendo que el sistema no
  está encendido todo el día.<br>
    La finalidad de anacron es controlar la ejecución de tareas críticas que no
  pueden pasarse por alto, las cuales cron no correrá una vez que se haya
  encendido el sistema ya que su tiempo de ejecución expiró.<br>
    En ese sentido, anacron es un complemento de cron para sistemas que no
  están encendidos las 24 horas del día (como laptops y PCs de escritorio) o
  para garantizar la ejecución de tareas críticas, incluso si el sistema tiene
  una <br>
    <br>
    interrupción temporal.</td>
  <td class=xl67 width=583 style='width:437pt'>A diferencia de cron, anacron no
  es un demonio, es decir, no está corriendo todo el tiempo.<br>
    De hecho solo corre a través de scripts de inicio del sistema o a través de
  tareas programadas de cron.<br>
    <br>
    Con anacron no se pueden programar tareas en intervalos menores a días,
  mientras que con cron se pueden planificar tareas a ser ejecutadas en horas o
  minutos.<br>
    Por otro lado, anacron no ejecuta tareas en tiempo específicos como cron
  hace.</td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=300 style='height:225.0pt'>
  <td height=300 class=xl67 width=48 style='height:225.0pt;width:36pt'></td>
  <td class=xl68 width=284 style='width:213pt'>/etc/anacrontab</td>
  <td class=xl67 width=944 style='width:708pt'>Cuando anacron se ejecuta lee un
  lista de tareas definidas en el archivo /etc/anacrontab.<br>
    Cada entrada en este archivo especifica un período en días, un retardo en
  minutos, un identificador de tarea único y un comando a ejecutar. <br>
    <br>
    Analicemos el archivo /etc/anacrontab que viene en el sistema:<br>
    Tiempo en días Retardo Identificador Comando<br>
    1 5 cron.daily run-parts /etc/cron.daily<br>
    7 10 cron.weekly run-parts /etc/cron.weekly<br>
    @monthly 15 cron.monthly run-parts /etc/cron.monthly</td>
  <td class=xl67 width=583 style='width:437pt'>Tomemos como ejemplo la segunda
  línea.<br>
    Esta indica que la próxima vez que se corra anacron se revisará si han
  pasado 7 días desde la última ejecución, consultado la fecha en el archivo
  /var/spool/anacron/cron.weekly.<br>
    De ser así se volverán a correr los scripts del directorio /etc/cron.weekly
  una vez que hayan pasado 10 minutos después de la ejecución de anacron.<br>
    <br>
    El identificador de tarea debe ser único.<br>
    Esto es porque anacron creará un archivo en el directorio /var/spool/anacron
  para cada una de las tareas con su identificador.<br>
    Allí se guardará la fecha de la última ejecución de la tarea por parte de
  anacron, de forma que se pueda comparar con el primer campo (el de tiempo en
  días). <br>
    <br>
    moody:~# ls /var/spool/anacron/<br>
    cron.daily<span style='mso-spacerun:yes'>  </span>cron.monthly<span
  style='mso-spacerun:yes'>  </span>cron.weekly<br>
    Anacron creó un archivo por cada identificador de tarea especificado en el
  /etc/anacrontab.</td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=20 style='height:15.0pt'>
  <td height=20 class=xl67 width=48 style='height:15.0pt;width:36pt'></td>
  <td class=xl68 width=284 style='width:213pt'></td>
  <td class=xl67 width=944 style='width:708pt'></td>
  <td class=xl67 width=583 style='width:437pt'></td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=20 style='height:15.0pt'>
  <td height=20 class=xl67 width=48 style='height:15.0pt;width:36pt'></td>
  <td class=xl68 width=284 style='width:213pt'></td>
  <td class=xl67 width=944 style='width:708pt'></td>
  <td class=xl67 width=583 style='width:437pt'></td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=20 style='height:15.0pt'>
  <td height=20 class=xl67 width=48 style='height:15.0pt;width:36pt'></td>
  <td class=xl68 width=284 style='width:213pt'></td>
  <td class=xl67 width=944 style='width:708pt'></td>
  <td class=xl67 width=583 style='width:437pt'></td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr height=20 style='height:15.0pt'>
  <td height=20 class=xl67 width=48 style='height:15.0pt;width:36pt'></td>
  <td class=xl68 width=284 style='width:213pt'></td>
  <td class=xl67 width=944 style='width:708pt'></td>
  <td class=xl67 width=583 style='width:437pt'></td>
  <td class=xl67 width=751 style='width:563pt'></td>
  <td class=xl67 width=269 style='width:202pt'></td>
 </tr>
 <tr class=xl65 height=20 style='height:15.0pt'>
  <td height=20 class=xl66 width=48 style='height:15.0pt;width:36pt'><a
  href="../107.htm" target="_parent"><span style='font-weight:700'>Volver</span></a></td>
  <td class=xl65 width=284 style='width:213pt'></td>
  <td class=xl65 width=944 style='width:708pt'></td>
  <td class=xl65 width=583 style='width:437pt'></td>
  <td class=xl65 width=751 style='width:563pt'></td>
  <td class=xl65 width=269 style='width:202pt'></td>
 </tr>
 <![if supportMisalignedColumns]>
 <tr height=0 style='display:none'>
  <td width=48 style='width:36pt'></td>
  <td width=284 style='width:213pt'></td>
  <td width=944 style='width:708pt'></td>
  <td width=583 style='width:437pt'></td>
  <td width=751 style='width:563pt'></td>
  <td width=269 style='width:202pt'></td>
 </tr>
 <![endif]>
</table>

</body>

</html>
